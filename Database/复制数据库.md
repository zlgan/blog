# 备份与还原--不脱机
```sql
use master
--备份数据库
backup database test1 to disk='d:\test1.bak'
--设置单用户模式
alter database test1 set single_user
restore database test1 from disk='d:\test1.bak' with replace
--恢复多用户模式
alter database test1 set multi_user
```
# 备份与还原--脱机
```sql
use master
backup database test1 to disk='e:\test1.bak'
alter database test1 set offline with rollback immediate
restore database test1 from disk='e:\test1.bak' with replace
alter database test1 set online 
```
# 复制数据库
```sql
--备份源数据库
backup database test1 to disk='d:\test1.bak'
--查看源数据库的文件
restore filelistonly from disk='d:\test1.bak'
--复制并创建一个新的数据库
restore database test2 from disk='d:\test1.bak'
with 
move 'test1' to 'd:\test2.mdf',
move 'test1_log' to 'd:\test2.ldf'
```