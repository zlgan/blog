---
title: Git 分支管理
date: 2021-12-05 16:12:18
tags:
categories: Git 踪的远程分支
---

### 查看分支
``` bash
# -a 显示所有分支
PS E:\workspace\Project\Git\test2\leo\proj> git branch -a
* feature/leo
  remotes/origin/HEAD -> origin/master
  remotes/origin/dev
  remotes/origin/feature/leo
  remotes/origin/feature/zhangsan
  remotes/origin/master
 # -r 显示远程分支
 PS E:\workspace\Project\Git\test2\leo\proj> git branch -r
  origin/HEAD -> origin/master
  origin/dev
  origin/feature/leo
  origin/feature/zhangsan
  origin/master
 # -v 查看分支最后提交的SHA1值
  git branch -v
  aaa         76e8cf9 [gone] add fast2
* dev         76e8cf9 [ahead 1] add fast2
  feature/leo 76e8cf9 add fast2
  master      bc05d83 Merge branch 'master' of gitee.com:zlgan/gittest
#查看跟踪的远程分支，以及当前分支的shar1
git branch -vv
dev         8a11c0b [origin/dev: behind 1] update file1 #当前分支落后远程分支一个提交
master      bc05d83 [origin/master] Merge branch 'master' of gitee.com:zlgan/gittest
#设置跟踪的远程分支
git branch --set-upstream-to=origin/branch-name

#查看远程仓库的详细信息
$ git remote show origin
* remote origin
  Fetch URL: git@gitee.com:zlgan/gittest.git
  Push  URL: git@gitee.com:zlgan/gittest.git
  HEAD branch: master
  Remote branches:
    aaa                       new (next fetch will store in remotes/origin)
    bbb                       new (next fetch will store in remotes/origin)
    dev                       tracked
    feature/jack              tracked
    feature/leo               tracked
    master                    tracked
    refs/remotes/origin/dev_2 stale (use 'git remote prune' to remove)
  Local branches configured for 'git pull':
    dev         merges with remote dev
    feature/leo merges with remote feature/leo
    master      merges with remote master
  Local refs configured for 'git push':
    dev         pushes to dev         (up to date)
    feature/leo pushes to feature/leo (up to date)
    master      pushes to master      (up to date)

Administrator@LeoComputer MINGW64 ~/Desktop
```
### 创建分支
```bash
  git branch br4 #创建本地分支
  git push origin br4:br4 #将本地分支推送到远程并<本地分支名>:<远程分支名>
  git branch --set-upstream-to=origin/br4 br4 #将本地分支与远程分支建立关联
```

### 删除分支
```bash
  git branch -d <local-branch-name> #删除本地分支
  git push origin --delete <remote-branch-name> #删除远程分支
```
### 远程仓库与本地跟踪分支的同步
```bash
git fetch #同步
git fetch --prune #同步，并删除远程不存在的本地跟踪分支
git pull # fetch并merge到当前分支 
```
###
### 实战

#### 创建分支
1. 先有本地----》远程
```bash
 git branch -r #查看远程分支列表
 git checkout -b dev_2 #新建并切换到分支
 git push --set-upstream origin dev_2 #设置关联的远程分支并推送（方法一）
 git push origin -u dev_2 #设置关联的远程分支并推送（方法二）
```

2. 先有远程----》本地
```bash
 #1. 拉取远程分支，自动创建跟踪分支 origin/aaa,origin/bbb
 $ git pull
From gitee.com:zlgan/gittest
 * [new branch]      aaa        -> origin/aaa
 * [new branch]      bbb        -> origin/bbb
Already up to date.
 #2. 创建本地分支，并绑定跟踪的远程分支
 git checkout -b aaa origin/aaa #（方法一）
 git checkout --track origin/bbb #(方法二) 默认创建于跟踪分支同名的本地分支
```
#### 一个仓库，多个工作目录 worktree命令
```bash
#创建工作目录，并绑定一个分支
git worktree add </work/directory> branch_name 
#删除工作目录
1. rm </work/directory> #通过Linux命令删除目录
2. git worktree prune #清理工作树
```

